const Pdfix = require('./index');

describe('Pdfix', () => {
  let pdfix;

  beforeAll(async () => {
    pdfix = new Pdfix();
    await pdfix.loadPdfixSdk();
  });

  afterAll(() => {
    pdfix.getPdfixSdk().GetPdfix().Destroy();
  });

  it('should create Pdfix instance', () => {
    expect(pdfix).toBeInstanceOf(Pdfix);
  });

  it('should open a document from path', () => {
    const pdfDoc = pdfix.openDocumentFromPath('./pdf/test.pdf');
    expect(pdfDoc).toBeDefined();
  });

  it('should open a document from URL', async () => {
    const pdfDoc = await pdfix.openDocumentFromUrl('https://pdfix.net/pdf/test.pdf');
    expect(pdfDoc).toBeDefined();
  });

  it('should render a page to an image', () => {
    const pdfDoc = pdfix.openDocumentFromPath('./pdf/test.pdf');
    const pageNumber = 0;
    const imageBlob = pdfix.renderPage(pdfDoc, pageNumber);
    expect(imageBlob).toBeDefined();
  });
  
});